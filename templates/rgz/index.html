{% extends "base.html" %}

{% block lab %}Расчётно-графическое задание{% endblock %}

{% block main %}

<h1>Камера хранения</h1>

{% if show_alert %}
<script>
    alert("{{ alert_message }}");
</script>
{% endif %}

<div style="text-align:right; margin-bottom:10px;">
    {% if current_user.is_authenticated %}
        Пользователь: <b>{{ current_user.login }}</b>
    {% else %}
        Пользователь: Anonymous
    {% endif %}
</div>

<table border="1" cellpadding="8" cellspacing="0" style="margin:auto; border-collapse:collapse;">
    {% for row in range(0,10) %}
        <tr>
        {% for col in range(1,11) %}
            {% set num = row * 10 + col %}
            {% set cell = cells[num-1] %}
            {% if cell.tenant_id %}
                <td style="background:#dddddd; text-align:center;">
                    <a href="/rgz/book/{{ num }}" style="color:black; text-decoration:none;">{{ num }}</a>
                </td>
            {% else %}
                <td style="background:white; text-align:center;">
                    <a href="/rgz/book/{{ num }}" style="color:black; text-decoration:none;">{{ num }}</a>
                </td>
            {% endif %}
        {% endfor %}
        </tr>
    {% endfor %}
</table>

<div style="text-align:center; margin-top:15px;">
    Занято: {{ busy_count }} &nbsp;&nbsp;&nbsp;
    Свободно: {{ free_count }}
</div>

{% if current_user.is_authenticated %}
<h3 style="text-align:center; margin-top:20px;">Ваши ячейки</h3>

<div style="width:200px; margin:auto;">
    {% for num in user_cells %}
        <div style="margin-bottom:5px;">
            <span>{{ num }}</span>
            <a href="/rgz/release/{{ num }}"><button>Освободить</button></a>
        </div>
    {% endfor %}
</div>
{% endif %}

<div class="menu" style="text-align:center; margin-top:30px;">
    <a href="/rgz/login" class="link-btn">Войти</a>
    <a href="/rgz/register" class="link-btn">Регистрация</a>
    {% if current_user.is_authenticated %}
        <a href="/rgz/logout" class="link-btn">Выйти</a>
    {% endif %}
</div>

{% endblock %}
